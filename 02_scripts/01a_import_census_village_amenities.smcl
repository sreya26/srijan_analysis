{smcl}
{txt}{sf}{ul off}{.-}
      name:  {res}plog_8
       {txt}log:  {res}/Users/hemanshu/Dropbox/Current Work/Current Research/srijan/srijan analysis/02_scripts/01a_import_census_village_amenities.smcl
  {txt}log type:  {res}smcl
 {txt}opened on:  {res}18 Jul 2021, 23:06:50
{txt}
{com}. *********************************************************************************************************************
. *! version 1.0 dated 18 July 2021 by Hemanshu Kumar | first version to comply with Picard's -project- command
. * -- contains code that was earlier part of srijan_sampling.do 
. * This do-file is used to import census 2011 village amenities data 
. * This file is part of the SRIJAN Project (headed by Rohini Somanathan, Priyanka Arora, Hemanshu Kumar, et al)
. *********************************************************************************************************************
. 
. project , original("../01_data/census_2011_data/census_2011_village_amenities/DCHB_Village_Release_0800.csv")
{txt}project srijan > do-file uses original: {res}"01_data/census_2011_data/census_2011_village_amenities/DCHB_Village_Release_0800.csv" filesig(3090330473:43565549){txt}

{com}. project , original("../01_data/census_2011_data/census_2011_village_amenities/DCHB_Village_Release_2200.csv")
{txt}project srijan > do-file uses original: {res}"01_data/census_2011_data/census_2011_village_amenities/DCHB_Village_Release_2200.csv" filesig(1111982389:19945649){txt}

{com}. project , original("../01_data/census_2011_data/census_2011_village_amenities/DCHB_Village_Release_2300.csv")
{txt}project srijan > do-file uses original: {res}"01_data/census_2011_data/census_2011_village_amenities/DCHB_Village_Release_2300.csv" filesig(1214786279:52264982){txt}

{com}. 
. 
.         * list of states to which the locations belong
.         #delimit ;
{txt}delimiter now ;
{com}.         local state_codes 
>                         08 /* Rajasthan */ 
>                         22 /* Chhattisgarh */
>                         23 /* Madhya Pradesh */
>                         ;
{txt}
{com}.         #delimit cr
{txt}delimiter now cr
{com}. 
.         clear
{txt}
{com}.         save "../03_processed/village_amenities_data", replace emptyok
{txt}(note: dataset contains 0 observations)
(note: file ../03_processed/village_amenities_data.dta not found)
file ../03_processed/village_amenities_data.dta saved

{com}.         
.         foreach st of local state_codes {c -(}
{txt}  2{com}.                 import delimited "../01_data/census_2011_data/census_2011_village_amenities/DCHB_Village_Release_`st'00.csv", clear bindquotes(strict)
{txt}  3{com}.                 drop if missing(statename)
{txt}  4{com}.                 keep    *statecode statename district* subdistrict* village* cdblock* grampanchayat* ///
>                                 totalhouseholds totalpopulationofvillage totalscheduledcastespopulationof totalscheduledtribespopulationof ///
>                                 totalgeographicalareainhectares forestareainhectares netareasowninhectares areairrigatedbysourceinhectares
{txt}  5{com}. 
.                 missings dropvars _all, force // drops any variables that have all values missing
{txt}  6{com}.                 destring *area*, ignore("NA-") replace
{txt}  7{com}.                 append using "../03_processed/village_amenities_data"
{txt}  8{com}.                 save "../03_processed/village_amenities_data", replace          
{txt}  9{com}.         {c )-}
{res}{text}(396 vars, 44,672 obs)
(0 observations deleted)

{p 0 4}{txt}Checking missings in {res} ïstatecode statename districtcode districtname subdistrictcode subdistrictname villagecode villagename cdblockcode cdblockname grampanchayatcode grampanchayatname subdistrictheadquartername subdistrictheadquarterdistancein districtheadquartername districtheadquarterdistanceinkm totalgeographicalareainhectares totalhouseholds totalpopulationofvillage totalscheduledcastespopulationof totalscheduledtribespopulationof villagepincodestatusa1na2 forestareainhectares netareasowninhectares areairrigatedbysourceinhectares:{txt}{p_end}
44672 observations with missing values

{p}note: grampanchayatcode grampanchayatname dropped{p_end}
totalgeographicalareainhectares already numeric; no {res}replace
{txt}forestareainhectares already numeric; no {res}replace
{txt}netareasowninhectares already numeric; no {res}replace
{txt}areairrigatedbysourceinhectares already numeric; no {res}replace
{txt}file ../03_processed/village_amenities_data.dta saved
{res}{text}(397 vars, 20,128 obs)
(2 observations deleted)

{p 0 4}{txt}Checking missings in {res} ïstatecode statename districtcode districtname subdistrictcode subdistrictname villagecode villagename cdblockcode cdblockname grampanchayatcode grampanchayatname subdistrictheadquartername subdistrictheadquarterdistancein districtheadquartername districtheadquarterdistanceinkm totalgeographicalareainhectares totalhouseholds totalpopulationofvillage totalscheduledcastespopulationof totalscheduledtribespopulationof villagepincodestatusa1na2 forestareainhectares netareasowninhectares areairrigatedbysourceinhectares:{txt}{p_end}
20126 observations with missing values

{p}note: grampanchayatcode dropped{p_end}
totalgeographicalareainhectares already numeric; no {res}replace
{txt}forestareainhectares: characters{res} N A{txt} removed; {res}replaced {txt}as {res}double
{txt}(6 missing values generated)
{res}{txt}netareasowninhectares: characters{res} N A{txt} removed; {res}replaced {txt}as {res}double
{txt}(6 missing values generated)
{res}{txt}areairrigatedbysourceinhectares: character{res} -{txt} removed; {res}replaced {txt}as {res}double
{txt}(289 missing values generated)
{res}{txt}{p 0 7 2}
(note: variable
villagename was 
str31, now str40 to accommodate using data's values)
{p_end}
{p 0 7 2}
(note: variable
subdistrictheadquartername was 
str15, now str20 to accommodate using data's values)
{p_end}
{p 0 7 2}
(note: variable
districtheadquartername was 
str13, now str14 to accommodate using data's values)
{p_end}
file ../03_processed/village_amenities_data.dta saved
{res}{text}(396 vars, 54,903 obs)
(0 observations deleted)

{p 0 4}{txt}Checking missings in {res} ïstatecode statename districtcode districtname subdistrictcode subdistrictname villagecode villagename cdblockcode cdblockname grampanchayatcode grampanchayatname subdistrictheadquartername subdistrictheadquarterdistancein districtheadquartername districtheadquarterdistanceinkm totalgeographicalareainhectares totalhouseholds totalpopulationofvillage totalscheduledcastespopulationof totalscheduledtribespopulationof villagepincodestatusa1na2 forestareainhectares netareasowninhectares areairrigatedbysourceinhectares:{txt}{p_end}
54903 observations with missing values

{p}note: grampanchayatcode grampanchayatname dropped{p_end}
totalgeographicalareainhectares already numeric; no {res}replace
{txt}forestareainhectares already numeric; no {res}replace
{txt}netareasowninhectares already numeric; no {res}replace
{txt}areairrigatedbysourceinhectares already numeric; no {res}replace
{txt}{p 0 7 2}
(note: variable
districtname was 
str21, now str24 to accommodate using data's values)
{p_end}
{p 0 7 2}
(note: variable
subdistrictname was 
str20, now str26 to accommodate using data's values)
{p_end}
{p 0 7 2}
(note: variable
villagename was 
str31, now str40 to accommodate using data's values)
{p_end}
{p 0 7 2}
(note: variable
cdblockname was 
str22, now str26 to accommodate using data's values)
{p_end}
{p 0 7 2}
(note: variable
subdistrictheadquarterdistancein was 
int, now float to accommodate using data's values)
{p_end}
{p 0 7 2}
(note: variable
districtheadquartername was 
str11, now str14 to accommodate using data's values)
{p_end}
{p 0 7 2}
(note: variable
districtheadquarterdistanceinkm was 
int, now float to accommodate using data's values)
{p_end}
{p 0 7 2}
(note: variable
forestareainhectares was 
float, now double to accommodate using data's values)
{p_end}
{p 0 7 2}
(note: variable
netareasowninhectares was 
float, now double to accommodate using data's values)
{p_end}
{p 0 7 2}
(note: variable
areairrigatedbysourceinhectares was 
float, now double to accommodate using data's values)
{p_end}
file ../03_processed/village_amenities_data.dta saved

{com}. 
.         * check that the census 2011 codes uniquely identify villages 
.         
.         use "../03_processed/village_amenities_data", clear
{txt}
{com}.         distinct villagecode

{res}{col 1}{text}{hline 13}{c TT}{hline 11}{hline 11}
{col 1}{text}            {col 14}{c |}     total{col 26}  distinct
{res}{col 1}{text}{hline 13}{c +}{hline 11}{hline 11}
{col 1}{text} villagecode{col 14}{c |}{result}    119701{col 26}    119701
{col 1}{text}{hline 13}{c BT}{hline 11}{hline 11}
{res}{txt}
{com}.         assert r(N) == r(ndistinct)
{txt}
{com}.         
.         * rename and label some variables and keep only those that are needed
. 
.         rename ?statecode state_code
{res}{txt}
{com}.         rename statename state_name
{res}{txt}
{com}.         rename districtcode district_code
{res}{txt}
{com}.         rename districtname district_name
{res}{txt}
{com}.         rename subdistrictcode subdistrict_code
{res}{txt}
{com}.         rename subdistrictname subdistrict_name
{res}{txt}
{com}.         rename cdblockcode block_code
{res}{txt}
{com}.         rename cdblockname block_name
{res}{txt}
{com}.         rename villagecode village_code
{res}{txt}
{com}.         rename villagename village_name
{res}{txt}
{com}.         * rename grampanchayatcode gp_code
.         rename grampanchayatname gp_name
{res}{txt}
{com}.                 
.         label var state_code "State Code"
{txt}
{com}.         
.         foreach var of varlist *_code *_name {c -(}
{txt}  2{com}.                 local lab: variable label `var'
{txt}  3{com}.                 local lab = "Census 2011 `lab'"
{txt}  4{com}.                 label var `var' "`lab'"
{txt}  5{com}.         {c )-}
{txt}
{com}.         
.         foreach var of varlist state_name district_name subdistrict_name block_name village_name {c -(}
{txt}  2{com}.                 replace `var' = trim(itrim(`var'))
{txt}  3{com}.         {c )-}
{txt}(0 real changes made)
(9,675 real changes made)
(1,123 real changes made)
(0 real changes made)
(329 real changes made)

{com}.         
.         rename totalhouseholds total_hh
{res}{txt}
{com}.         rename totalpopulationofvillage total_pop
{res}{txt}
{com}.         rename totalscheduledcastespopulationof sc_pop
{res}{txt}
{com}.         rename totalscheduledtribespopulationof st_pop
{res}{txt}
{com}.         rename totalgeographicalareainhectares total_area
{res}{txt}
{com}.         rename netareasowninhectares netsown_area
{res}{txt}
{com}.         rename forestareainhectares forest_area
{res}{txt}
{com}.         rename areairrigatedbysourceinhectares irrigated_area
{res}{txt}
{com}. 
.         keep *_code *_name total_* *_pop *_area
{txt}
{com}.         
.         compress
{txt}  (0 bytes saved)

{com}.         save "../03_processed/village_amenities_data", replace
{txt}file ../03_processed/village_amenities_data.dta saved

{com}.         
. 
. project , creates("../03_processed/village_amenities_data.dta")
{txt}project srijan > do-file creates: {res}"03_processed/village_amenities_data.dta" filesig(1801946077:24553246){txt}

{com}. 
{txt}end of do-file
      name:  {res}plog_8
       {txt}log:  {res}/Users/hemanshu/Dropbox/Current Work/Current Research/srijan/srijan analysis/02_scripts/01a_import_census_village_amenities.smcl
  {txt}log type:  {res}smcl
 {txt}closed on:  {res}18 Jul 2021, 23:07:07
{txt}{.-}
{smcl}
{txt}{sf}{ul off}